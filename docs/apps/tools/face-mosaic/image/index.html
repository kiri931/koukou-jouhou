<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»åƒã®é¡”ãƒ¢ã‚¶ã‚¤ã‚¯</title>
    <link rel="stylesheet" href="../../../../assets/css/digital.css">
    <script src="main.js" defer onload="console.log('main.js loaded');"></script>

    <!-- ğŸ”¥ opencv.js ã¯ main.js ã®å¾Œã«èª­ã¿è¾¼ã‚€ -->
    <script src="opencv.js" defer onload="console.log('opencv.js loaded'); onOpenCvReady();"
        onerror="console.error('opencv.js failed to load');"></script>

    <style>
        #canvas {
            width: 100%;
            height: auto;
            border: 1px solid var(--dg-color-border);
            border-radius: var(--dg-radius-md);
            background: var(--dg-color-bg);
        }

        #effects {
            display: flex;
            flex-wrap: wrap;
            gap: 10px 14px;
            align-items: center;
        }

        #effects label {
            display: inline-flex;
            gap: 8px;
            align-items: center;
            padding: 6px 10px;
            border: 1px solid var(--dg-color-border);
            border-radius: 999px;
            background: var(--dg-color-surface);
        }

        #error {
            color: var(--dg-color-danger);
            font-size: var(--dg-text-sm);
            white-space: pre-wrap;
        }
    </style>

<script id="dg-topbar-loader">
(function () {
  const firstSeg = (location.pathname.split("/")[1] || "").trim();
  const candidates = ["/assets/js/dg-topbar.js"];
  if (firstSeg) candidates.push("/" + firstSeg + "/assets/js/dg-topbar.js");

  function load(i) {
    if (i >= candidates.length) return;
    const s = document.createElement("script");
    s.src = candidates[i];
    s.defer = true;
    s.onerror = () => load(i + 1);
    document.head.appendChild(s);
  }

  load(0);
})();
</script>
</head>

<body>
    <header class="dg-header">
        <div class="dg-container dg-header__inner">
            <a class="dg-brand" href="../../../../">
                <span class="dg-brand__title">é«˜æ ¡æƒ…å ±</span>
                <span class="dg-brand__badge">é¡”ãƒ¢ã‚¶ã‚¤ã‚¯</span>
            </a>
        </div>
    </header>

    <main class="dg-main">
        <div class="dg-container dg-stack">
            <h1 class="dg-page-title">ç”»åƒã®é¡”ãƒ¢ã‚¶ã‚¤ã‚¯å‡¦ç†ï¼ˆOpenCV.jsï¼‰</h1>

            <div class="dg-callout dg-callout--info">
                <div class="dg-callout__title">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</div>
                <p class="dg-lead">ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ç”»åƒã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã›ãšã€ãƒ–ãƒ©ã‚¦ã‚¶å†…ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã§é¡”æ¤œå‡ºã¨åŠ å·¥ã‚’è¡Œã„ã¾ã™ã€‚</p>
            </div>

            <div class="dg-card">
                <div class="dg-card__body dg-stack">
                    <div class="dg-field">
                        <label class="dg-label" for="fileInput">ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«</label>
                        <input class="dg-input" type="file" id="fileInput" accept="image/*">
                        <div class="dg-help">ç«¯æœ«å†…ã®ç”»åƒã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</div>
                    </div>

                    <div class="dg-grid">
                        <div class="dg-field">
                            <label class="dg-label" for="minNeighbors">æ¤œå‡ºæ„Ÿåº¦ (minNeighbors): <span id="minNeighborsValue">2</span></label>
                            <input type="range" id="minNeighbors" min="1" max="5" value="2" step="1">
                            <div class="dg-help">å°ã•ã„ã»ã©å¤šãæ¤œå‡ºï¼ˆèª¤æ¤œå‡ºã‚‚å¢—ãˆã‚‹ï¼‰</div>
                        </div>

                        <div class="dg-field">
                            <label class="dg-label" for="scaleFactor">æ¤œå‡ºç²¾åº¦ (scaleFactor): <span id="scaleFactorValue">1.1</span></label>
                            <input type="range" id="scaleFactor" min="1.05" max="1.3" value="1.1" step="0.05">
                            <div class="dg-help">å°ã•ã„ã»ã©ç²¾åº¦é«˜ã„ï¼ˆå‡¦ç†ã¯é…ããªã‚‹ï¼‰</div>
                        </div>
                    </div>

                    <div class="dg-field">
                        <div class="dg-label">ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</div>
                        <div id="effects">
                            <label><input type="checkbox" id="fx_mosaic"> ãƒ¢ã‚¶ã‚¤ã‚¯</label>
                            <label><input type="checkbox" id="fx_blur"> ã¼ã‹ã—</label>
                            <label><input type="checkbox" id="fx_black"> é»’å¡—ã‚Š</label>
                            <label><input type="checkbox" id="fx_rect"> æ ç·š</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dg-card">
                <div class="dg-card__body dg-stack">
                    <div class="dg-row" style="justify-content: space-between;">
                        <div id="status" class="dg-help">OpenCV.js èª­ã¿è¾¼ã¿ä¸­...</div>
                        <button class="dg-btn" id="download" disabled>ç”»åƒã‚’ä¿å­˜</button>
                    </div>

                    <div id="error" aria-live="polite"></div>
                    <canvas id="canvas"></canvas>
                </div>
            </div>

            <div class="dg-row">
                <a class="dg-btn dg-btn--subtle" href="../">ãƒ„ãƒ¼ãƒ«ä¸€è¦§ã¸</a>
                <a class="dg-btn dg-btn--subtle" href="../../../../">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
            </div>
        </div>
    </main>

    <footer class="dg-footer">
        <div class="dg-container dg-footer__inner">
            <div class="dg-footer__meta">Â© 2026 é«˜æ ¡æƒ…å ±</div>
        </div>
    </footer>
</body>

</html>