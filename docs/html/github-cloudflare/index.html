<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="/js/analytics.js"></script>
    
    
  <meta charset="UTF-8">
  <title>CloudflareドメインをGitHub Pagesに接続してHTTPS化する手順</title>
</head>
<body>
  <header>
    <h1>CloudflareドメインをGitHub Pagesに接続してHTTPS化する手順</h1>
    <p>作成日：2025年10月29日</p>
  </header>

  <section>
    <h2>1. 概要</h2>
    <p>このページでは、Cloudflareで管理している独自ドメインをGitHub Pagesに接続し、無料のSSL証明書（Let's Encrypt）を用いてHTTPS化する手順をまとめています。</p>
  </section>

  <section>
    <h2>2. 必要なもの</h2>
    <ul>
      <li>GitHubアカウントと公開中のリポジトリ（例：<code>username.github.io</code>）</li>
      <li>Cloudflareで管理している独自ドメイン（例：<code>koukou-jouhou.org</code>）</li>
    </ul>
  </section>

  <section>
    <h2>3. CNAMEファイルの作成</h2>
    <p>リポジトリのルートに <code>CNAME</code> ファイルを作り、以下の内容を記述します。</p>
    <pre><code>koukou-jouhou.org</code></pre>
    <p>このファイルをコミット・プッシュすることで、GitHubが独自ドメインを認識します。</p>
  </section>

  <section>
    <h2>4. CloudflareのDNS設定</h2>
    <p>Cloudflareの「DNS」タブで、以下のレコードを登録します。</p>
    <table border="1" cellspacing="0" cellpadding="5">
      <tr><th>タイプ</th><th>名前</th><th>内容</th><th>Proxy</th></tr>
      <tr><td>A</td><td>@</td><td>185.199.108.153</td><td>DNS only（灰色雲）</td></tr>
      <tr><td>A</td><td>@</td><td>185.199.109.153</td><td>DNS only（灰色雲）</td></tr>
      <tr><td>A</td><td>@</td><td>185.199.110.153</td><td>DNS only（灰色雲）</td></tr>
      <tr><td>A</td><td>@</td><td>185.199.111.153</td><td>DNS only（灰色雲）</td></tr>
      <tr><td>CNAME</td><td>www</td><td>username.github.io</td><td>DNS only（灰色雲）</td></tr>
    </table>
    <p>※オレンジ雲（Proxy ON）にするとGitHubのSSL発行がブロックされるため、灰色雲（DNS only）にします。</p>
  </section>

  <section>
    <h2>5. GitHub Pagesの設定</h2>
    <ol>
      <li>リポジトリの <strong>Settings → Pages</strong> を開く</li>
      <li>「Custom domain」に <code>koukou-jouhou.org</code> を入力して保存</li>
      <li>数分後に「DNS check successful」と表示されます</li>
    </ol>
    <p>この段階では「Enforce HTTPS — Unavailable（証明書が未発行）」と表示される場合がありますが、問題ありません。</p>
  </section>

  <section>
    <h2>6. HTTPS証明書の発行待ち</h2>
    <p>GitHub PagesがLet's Encryptを通して証明書を自動発行します。通常30分〜2時間、最大で1日程度かかります。</p>
    <p>発行が完了すると「Enforce HTTPS」にチェックを入れられるようになります。</p>
  </section>

  <section>
    <h2>7. Cloudflare設定を元に戻す</h2>
    <p>証明書の発行が完了し、HTTPSが有効になったら以下の設定を推奨します。</p>
    <ul>
      <li>SSL/TLSモード：<strong>Full</strong> または <strong>Full (strict)</strong></li>
      <li>Always Use HTTPS：<strong>ON</strong></li>
      <li>Automatic HTTPS Rewrites：<strong>ON</strong></li>
    </ul>
    <p>※DNSのProxy（オレンジ雲）は引き続き「灰色雲（DNS only）」のままにしてください。</p>
  </section>

  <section>
    <h2>8. 確認</h2>
    <ul>
      <li><a href="https://koukou-jouhou.org" target="_blank">https://koukou-jouhou.org</a> にアクセスし、🔒マークが表示されるか確認</li>
      <li><code>http://koukou-jouhou.org</code> にアクセスすると自動でHTTPSにリダイレクトされれば成功です。</li>
    </ul>
  </section>

  <footer>
    <p>© 2025 koukou-jouhou.org All rights reserved.</p>
  </footer>
</body>
</html>
