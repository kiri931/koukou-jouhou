<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>adminログイン（情技検）</title>
  <link rel="stylesheet" href="../assets/css/digital.css" />

  <!-- 任意: e-net Googleログイン（既存 /docs/e-net を踏襲） -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <header class="dg-header">
    <div class="dg-container dg-header__inner">
      <a class="dg-brand" href="../apps/kentei/joho-gijutsukentei/">
        <span class="dg-brand__title">情技検 3級</span>
        <span class="dg-brand__badge">admin</span>
      </a>
        <nav class="dg-nav">
          <a href="../apps/kentei/joho-gijutsukentei/">公開トップ</a>
      </nav>
    </div>
  </header>

  <main class="dg-main">
    <div class="dg-container">
      <h1 class="dg-page-title">adminログイン</h1>
      <p class="dg-lead">このログインは静的サイト上の「授業/運用ゲート」です（完全な秘匿ではありません）。</p>

      <div class="dg-stack">
        <section class="dg-card">
          <div class="dg-card__body dg-prose">
            <h2 style="margin-top:0">遷移先</h2>
            <p>ログイン後は <code id="returnTo">(読み込み中)</code> に戻ります。</p>
          </div>
        </section>

        <section class="dg-card" aria-labelledby="simple-title">
          <div class="dg-card__body">
            <h2 id="simple-title" class="dg-page-title" style="font-size:var(--dg-text-xl); margin-top:0">簡易認証（合言葉）</h2>
            <div class="dg-note dg-note--warning">
              <div>合言葉はクライアント側に存在します。必要に応じて外部保護（Cloudflare Access等）に切替してください。</div>
            </div>

            <form id="passcodeForm" class="dg-stack" style="margin-top:16px">
              <div class="dg-field">
                <label class="dg-label" for="passcode">合言葉</label>
                <input class="dg-input" id="passcode" name="passcode" type="password" autocomplete="off" required />
                <div class="dg-help">初期値は <code>admin</code>（運用前に変更推奨）</div>
              </div>
              <div class="dg-row">
                <button class="dg-btn" type="submit">合言葉でログイン</button>
                <span id="passcodeStatus" class="dg-badge" style="display:none"></span>
              </div>
            </form>
          </div>
        </section>

        <section class="dg-card" aria-labelledby="enet-title">
          <div class="dg-card__body">
            <h2 id="enet-title" class="dg-page-title" style="font-size:var(--dg-text-xl); margin-top:0">e-net Googleログイン（任意）</h2>
            <p class="dg-lead" style="margin-bottom:12px">既存 <code>/docs/e-net</code> と同様の判定（<code>@e-net.nara.jp</code> ドメインのみ）でログインします。</p>

            <div id="g_id_onload"
              data-client_id="377931252827-5qj0kuet73lfq6f4ombtmclojfkarhhv.apps.googleusercontent.com"
              data-callback="handleEnetLogin">
            </div>
            <div class="g_id_signin" data-type="standard" data-theme="outline" data-size="large"></div>
          </div>
        </section>

        <section class="dg-card" aria-labelledby="firebase-title">
          <div class="dg-card__body">
            <h2 id="firebase-title" class="dg-page-title" style="font-size:var(--dg-text-xl); margin-top:0">Firebase Googleログイン（任意）</h2>
            <p class="dg-lead" style="margin-bottom:12px">設定が無い場合は無効表示になります。</p>
            <div class="dg-row">
              <button id="firebaseLogin" class="dg-btn dg-btn--subtle" type="button">Firebaseでログイン</button>
              <span id="firebaseStatus" class="dg-badge">未設定</span>
            </div>
            <p class="dg-help" style="margin-top:12px">
              設定方法: <code>/auth/firebase-config.example.js</code> を <code>/auth/firebase-config.js</code> にコピーして編集します。
            </p>
          </div>
        </section>

        <section class="dg-card">
          <div class="dg-card__body dg-prose">
            <h2 style="margin-top:0">ログアウト</h2>
            <p>一度ログインすると、同一タブ内（sessionStorage）でのみ有効です。</p>
            <button id="logout" class="dg-btn dg-btn--danger" type="button">ログアウト（このタブ）</button>
            <span id="logoutStatus" class="dg-badge" style="display:none"></span>
          </div>
        </section>

      </div>
    </div>
  </main>

  <footer class="dg-footer">
    <div class="dg-container dg-footer__inner">
      <div class="dg-footer__meta">© 情技検 学習ツール（静的サイト）</div>
      <div class="dg-footer__meta">最終更新: 2026-01-15</div>
    </div>
  </footer>

  <script type="module" src="./login.js"></script>
</body>
</html>
